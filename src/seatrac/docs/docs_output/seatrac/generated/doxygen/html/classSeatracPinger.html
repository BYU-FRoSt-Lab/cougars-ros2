<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: SeatracPinger Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classSeatracPinger-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">SeatracPinger Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Sends acoustic pings on a schedule.  
 <a href="classSeatracPinger.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for SeatracPinger:</div>
<div class="dyncontent">
<div class="center"><img src="classSeatracPinger__inherit__graph.png" border="0" usemap="#aSeatracPinger_inherit__map" alt="Inheritance graph"/></div>
<map name="aSeatracPinger_inherit__map" id="aSeatracPinger_inherit__map">
<area shape="rect" title="Sends acoustic pings on a schedule." alt="" coords="5,80,117,107"/>
<area shape="rect" title=" " alt="" coords="10,5,113,32"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for SeatracPinger:</div>
<div class="dyncontent">
<div class="center"><img src="classSeatracPinger__coll__graph.png" border="0" usemap="#aSeatracPinger_coll__map" alt="Collaboration graph"/></div>
<map name="aSeatracPinger_coll__map" id="aSeatracPinger_coll__map">
<area shape="rect" title="Sends acoustic pings on a schedule." alt="" coords="5,80,117,107"/>
<area shape="rect" title=" " alt="" coords="10,5,113,32"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af84310d5559411c1c40e321d6d3cc83f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSeatracPinger.html#af84310d5559411c1c40e321d6d3cc83f">SeatracPinger</a> ()</td></tr>
<tr class="separator:af84310d5559411c1c40e321d6d3cc83f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Sends acoustic pings on a schedule. </p>
<dl class="section author"><dt>Author</dt><dd>Clayton Smith </dd></dl>
<dl class="section date"><dt>Date</dt><dd>September 2024</dd></dl>
<p>Broadcasts acoustic pings over the seatrac x150 beacon on a timed schedule to avoid message overlaps in a fleet of UUVs. Signals are sent in a round-robin style, where each vehicle takes a turn sending a ping. The schedule is managed by the rasberry pi clock in each vehicle, so that it does not depend on every signal being receieved.</p>
<p>The ping schedule is based on 3 parameters: ping_delay_seconds, number_of_vehicles, and vehicle_order, and uses the following formula: ping_cycle_length = ping_delay_seconds * number_of_vehicles seconds_into_cycle = seconds_since_midnight % ping_cycle_length time_until_ping = (ping_delay_seconds * vehicle_order - seconds_into_cycle) % ping_cycle_length</p>
<p>WARNING: raspberry pi clocks should be synchonized between vehicles before using this node.</p>
<p>Publishes:</p><ul>
<li>modem_send (seatrac_interfaces/msg/ModemSend) </li>
</ul>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="af84310d5559411c1c40e321d6d3cc83f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af84310d5559411c1c40e321d6d3cc83f">&#9670;&nbsp;</a></span>SeatracPinger()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">SeatracPinger::SeatracPinger </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ping_delay_seconds</td><td>The time between a ping from any vehicle in the water. For example if Coug 1, Coug 2, and Coug 3 are pinging each other in that order, then this would be the time between pings from Coug 1 and Coug 2. WARNING: ping_delay_seconds should be the same for all vehicles.</td></tr>
    <tr><td class="paramname">number_of_vehicles</td><td>The number of vehicles sending pings. The ping cycle will reset after every vehicle has sent a ping. The length of time for a complete ping cycle, or the time between pings from this vehicle is ping_delay_seconds multiplied by number_of_vehicles. WARNING: number_of_vehicles should be the same for all vehicles.</td></tr>
    <tr><td class="paramname">vehicle_ID</td><td>The Coug-UV vehicle ID, used to set the beacon ID. Also used to set the vehicle_order if vehicle_order is undefined.</td></tr>
    <tr><td class="paramname">vehicle_order</td><td>If specified, the position of this vehicle in the ping order. By default this will be the vehicle_ID, so coug1 will ping first, then coug2, etc.</td></tr>
  </table>
  </dd>
</dl>
<p>WARNING: If specified, vehicle_order should different for all vehicles. If two vehicles have the same vehicle_order, they will send pings at the same time.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">request_response</td><td>A boolean indicating whether or not to request a response signal from the vehicle you're addressing this ping to. Response signals can be used to calculate range between vehicles using 2-way-time-of-flight.</td></tr>
  </table>
  </dd>
</dl>
<p>WARNING: If request_response is true, the target_id must not be zero (between 1 and 16), indicating that this acoustic message is addressed to a specific vehicle and not all vehicles.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target_id</td><td>The vehicle to address this ping to. If target_id is zero then the ping sent will be addressed to all vehicles. If the target_id is between 1 and 16, it will address the message to the vehicle with vehicle_ID=target_id.</td></tr>
  </table>
  </dd>
</dl>
<p>Acoustic messages are always broadcasted to and received by every vehicle, regardless of which specific vehicle the message is addressed to. However, only the vehicle this message is addressed to will respond with a return message. And so, if request_response is true, this parameter must be set between 1 and 16. If request_response is false, it makes no difference what the target_id is, so you leave it at 0 to send to all beacons.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/modem_pinger.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>

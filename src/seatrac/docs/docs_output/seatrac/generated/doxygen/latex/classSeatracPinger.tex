\hypertarget{classSeatracPinger}{}\doxysection{Seatrac\+Pinger Class Reference}
\label{classSeatracPinger}\index{SeatracPinger@{SeatracPinger}}


Sends acoustic pings on a schedule.  




Inheritance diagram for Seatrac\+Pinger\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=164pt]{classSeatracPinger__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for Seatrac\+Pinger\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=164pt]{classSeatracPinger__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classSeatracPinger_af84310d5559411c1c40e321d6d3cc83f}{Seatrac\+Pinger}} ()
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Sends acoustic pings on a schedule. 

\begin{DoxyAuthor}{Author}
Clayton Smith 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
September 2024
\end{DoxyDate}
Broadcasts acoustic pings over the seatrac x150 beacon on a timed schedule to avoid message overlaps in a fleet of UUVs. Signals are sent in a round-\/robin style, where each vehicle takes a turn sending a ping. The schedule is managed by the rasberry pi clock in each vehicle, so that it does not depend on every signal being receieved.

The ping schedule is based on 3 parameters\+: ping\+\_\+delay\+\_\+seconds, number\+\_\+of\+\_\+vehicles, and vehicle\+\_\+order, and uses the following formula\+: ping\+\_\+cycle\+\_\+length = ping\+\_\+delay\+\_\+seconds $\ast$ number\+\_\+of\+\_\+vehicles seconds\+\_\+into\+\_\+cycle = seconds\+\_\+since\+\_\+midnight \% ping\+\_\+cycle\+\_\+length time\+\_\+until\+\_\+ping = (ping\+\_\+delay\+\_\+seconds $\ast$ vehicle\+\_\+order -\/ seconds\+\_\+into\+\_\+cycle) \% ping\+\_\+cycle\+\_\+length

WARNING\+: raspberry pi clocks should be synchonized between vehicles before using this node.

Publishes\+:
\begin{DoxyItemize}
\item modem\+\_\+send (seatrac\+\_\+interfaces/msg/\+Modem\+Send) 
\end{DoxyItemize}

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classSeatracPinger_af84310d5559411c1c40e321d6d3cc83f}\label{classSeatracPinger_af84310d5559411c1c40e321d6d3cc83f}} 
\index{SeatracPinger@{SeatracPinger}!SeatracPinger@{SeatracPinger}}
\index{SeatracPinger@{SeatracPinger}!SeatracPinger@{SeatracPinger}}
\doxysubsubsection{\texorpdfstring{SeatracPinger()}{SeatracPinger()}}
{\footnotesize\ttfamily Seatrac\+Pinger\+::\+Seatrac\+Pinger (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyParams}{Parameters}
{\em ping\+\_\+delay\+\_\+seconds} & The time between a ping from any vehicle in the water. For example if Coug 1, Coug 2, and Coug 3 are pinging each other in that order, then this would be the time between pings from Coug 1 and Coug 2. WARNING\+: ping\+\_\+delay\+\_\+seconds should be the same for all vehicles.\\
\hline
{\em number\+\_\+of\+\_\+vehicles} & The number of vehicles sending pings. The ping cycle will reset after every vehicle has sent a ping. The length of time for a complete ping cycle, or the time between pings from this vehicle is ping\+\_\+delay\+\_\+seconds multiplied by number\+\_\+of\+\_\+vehicles. WARNING\+: number\+\_\+of\+\_\+vehicles should be the same for all vehicles.\\
\hline
{\em vehicle\+\_\+\+ID} & The Coug-\/\+UV vehicle ID, used to set the beacon ID. Also used to set the vehicle\+\_\+order if vehicle\+\_\+order is undefined.\\
\hline
{\em vehicle\+\_\+order} & If specified, the position of this vehicle in the ping order. By default this will be the vehicle\+\_\+\+ID, so coug1 will ping first, then coug2, etc.\\
\hline
\end{DoxyParams}
WARNING\+: If specified, vehicle\+\_\+order should different for all vehicles. If two vehicles have the same vehicle\+\_\+order, they will send pings at the same time.


\begin{DoxyParams}{Parameters}
{\em request\+\_\+response} & A boolean indicating whether or not to request a response signal from the vehicle you\textquotesingle{}re addressing this ping to. Response signals can be used to calculate range between vehicles using 2-\/way-\/time-\/of-\/flight.\\
\hline
\end{DoxyParams}
WARNING\+: If request\+\_\+response is true, the target\+\_\+id must not be zero (between 1 and 16), indicating that this acoustic message is addressed to a specific vehicle and not all vehicles.


\begin{DoxyParams}{Parameters}
{\em target\+\_\+id} & The vehicle to address this ping to. If target\+\_\+id is zero then the ping sent will be addressed to all vehicles. If the target\+\_\+id is between 1 and 16, it will address the message to the vehicle with vehicle\+\_\+\+ID=target\+\_\+id.\\
\hline
\end{DoxyParams}
Acoustic messages are always broadcasted to and received by every vehicle, regardless of which specific vehicle the message is addressed to. However, only the vehicle this message is addressed to will respond with a return message. And so, if request\+\_\+response is true, this parameter must be set between 1 and 16. If request\+\_\+response is false, it makes no difference what the target\+\_\+id is, so you leave it at 0 to send to all beacons.

The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
src/modem\+\_\+pinger.\+cpp\end{DoxyCompactItemize}
